<div class="row">
  <div class="col-md-12">
  	<% if @show_houses.size == 0 %>
        <div class="row">
          <h3 style="padding-left: 20px;">目前没有收藏过样板房，请到样板房页面收藏自己喜欢的风格</h3>
        </div>
    <% end %>
    <% @show_houses.each do |s| %>
      <div class="col-xs-6 col-md-3">
      	<a href="<%= show_house_path(s.id) %>" title="<%= s.title %>" class="thumbnail">
              <% if s.show_house_pictures.size == 0 %>
                  <img src="images/temp-images/property1.jpg" class="attachment-property-thumb-image wp-post-image" alt="15421 Southwest 39th Terrace" title="15421 Southwest 39th Terrace">
              <% else %>
                  <img src="<%= s.show_house_pictures.first.path %>" style="width: 260px; height: 173px;" class="attachment-property-thumb-image wp-post-image" alt="<%= s.show_house_pictures.first.brief %>" title="<%= s.show_house_pictures.first.brief %>">
              <% end %>
        </a>
              <p style="text-align: center"><%= s.title %> - <%= s.style %></p>
              <p style="text-align: center"><input type="hidden" id="hidden_show_house_id" value="<%= s.id %>">
              	  <% if current_user %>
              	  <a class="btn btn-blue show-house-dislike" id="show-house-dislike" href="#" style="<%= (current_user.voted_up_on? s)?'':'display:none;' %>"><i class="icon-heart" style="color: red"></i>&nbsp;&nbsp;取消收藏</a>
                  <a class="btn btn-blue show-house-like" id="show-house-like" href="#" style="<%= (current_user.voted_up_on? s)?'display:none;':'' %>"><i class="icon-heart"></i>&nbsp;&nbsp;收藏</a>
                  <% end %>
              </p>
      </div>

    <% end %>
    <div class="row">
      <div class="col-md-12">
        <%= paginate @show_houses %>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function(){
      $.ajaxSetup({
          headers: {
              'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content')
          }
      });

      $('.show-house-like').on('click',function(){
      	  var $temporary_like=$(this);
      	  var $likeid = $(this).prev().prev().val();
          $.post( "/show_houses/like/"+$likeid, function( data ) {
              $temporary_like.hide();
              $temporary_like.prev().show();
              //.removeClass('btn-blue').addClass('btn-grey').html( "<i class='icon-heart' style='color: red;'></i> 已收藏" );
          });
      
      });
      $('.show-house-dislike').on('click',function(){
      	  var $temporary_dislike=$(this);
      	  var $dislikeid = $(this).prev().val();
          $.post( "/show_houses/unlike/"+$dislikeid, function( data ) {
              $temporary_dislike.hide();
              $temporary_dislike.next().show();

              //.removeClass('btn-blue').addClass('btn-grey').html( "<i class='icon-heart' style='color: red;'></i> 已收藏" );
          });

      });
  });

</script>